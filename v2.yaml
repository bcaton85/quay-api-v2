openapi: 3.0.3
info:
  title: Quay API v2
  description: Initial design of the V2 endpoints
  version: 0.0.0
tags:
  - name: organizations
  - name: repositories
  - name: tags
paths:
  /api/v2/organization:
    get:
      description: Here we'll combine data from /api/v1/user, /api/v1/organization/<org>/members, /api/v1/organization/<org>/robot
      tags:
        - organizations
      summary: Get's list of organizations
      parameters:
        - name: filter
          in: query
          description: Used to filter organizations. TODO will we only filter by name?
          required: false
          schema:
            type: string
        - name: sort
          in: query
          description: Used to sort organizations. TODO what are the possible values? ascending vs descending?
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Page number
          required: false
          schema:
            type: integer
        - name: role
          in: query
          description: Return only the organizations that the user has the specified role
          required: false
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 10
                  page:
                    type: integer
                    example: 0
                  nextPage:
                    type: string
                    example: 1
                  orgs:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          example: organization1
                        robotCount:
                          type: integer
                          example: 1
                        memberCount:
                          type: integer
                          example: 1
                        teamCount:
                          type: integer
                          example: 1
                        lastModified:
                          type: string
                          example: Thu, 02 Jun 2022 19:12:32 -0000
